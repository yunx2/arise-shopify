<div
  id="modal-overlay"
  class="hidden fixed flex justify-center items-center w-full h-full z-[1000] top-0"
  style="background-color: rgba(0, 0, 0, 0.5);">


  <div class="fixed pt-5 px-5 pb-8 rounded-md w-[300px] md:w-[600px] text-center shadow-lg bg-white" style="top: 50%; transform:translateY(-50%);">
    <!-- Close Button -->
    <button id="close-overlay" class="absolute end-[5px] top-[5px] p-1">
      <span class="sr-only">Close</span>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="h-5 w-5"
        viewBox="0 0 20 20"
        fill="currentColor">
        <path
          fill-rule="evenodd"
          d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
          clip-rule="evenodd" />
      </svg>
    </button>

    <!-- Not Logged In Modal -->
    <div id="default-login-modal" class="flex flex-col items-center py-5">
      <div class="mb-4 text-center">
        <h3 class="mt-[25px] mb-[16px] text-[32px] font-normal fontTermina text-gray-900">Join Arise</h3>
        <p class="mb-[40px] max-w-[450px] text-[14px] font-normal fontTermina ">
          Subscribe to join our loyalty program!
        </p>
      </div>
      <div class="flex flex-col-reverse md:grid md:grid-cols-2 gap-2 md:gap-4">
        <button id="redirect-trigger" class="w-full mb-2 md:mb-0 px-6 py-[7.5px] md:py-[9.5px] 2xl:py-[8px] text-[12px] xl:text-[14px] leading-[1.4] tracking-[0.08em] font-semibold uppercase text-center text-[005850] border border-[#005850] hover:text-white hover:bg-[#005850] rounded-full transition-colors duration-500">I have a subscription</button>
        <a href="{{ shop.url }}/pages/create-your-bundle" class="w-full px-6 py-[7.5px] md:py-[9.5px] 2xl:py-[8px] text-[12px] xl:text-[14px] leading-[1.4] tracking-[0.08em] font-semibold uppercase bg-[#005850] text-white border border-[#005850] hover:text-[#005850] hover:bg-white rounded-full transition-colors duration-500">create subscription</a>

      </div>
    </div>

    <!-- Logged In But Not Active Sub -->
    <div id="incative-sub-modal" class="hidden flex flex-col items-center py-5">
      <div class="text-center">
        <h3 class="mt-[25px] mb-[16px] text-[32px] font-normal fontTermina text-gray-900">Join Arise</h3>
        <p class="mb-[40px] max-w-[450px] text-[14px] font-normal fontTermina ">
          Subscribe to join our loyalty program! All you need is an active subscription to get started.
        </p>

      </div>
      <div class="flex flex-col-reverse md:grid md:grid-cols-2 gap-2 md:gap-4">
        <a href="{{ shop.url }}/pages/quiz" class="w-full flex items-center px-6 py-[7.5px] md:py-[9.5px] 2xl:py-[8px] text-[12px] xl:text-[14px] leading-[1.4] tracking-[0.08em] font-semibold uppercase text-[005850] border border-[#005850] hover:text-white hover:bg-[#005850] rounded-full transition-colors duration-500">Take the Quiz</a>
        <a href="{{ shop.url }}/pages/create-your-bundle" class="w-full flex items-center px-6 py-[7.5px] md:py-[9.5px] 2xl:py-[8px] text-[12px] xl:text-[14px] leading-[1.4] tracking-[0.08em] font-semibold uppercase bg-[#005850] text-white border border-[#005850] hover:text-[#005850] hover:bg-white rounded-full transition-colors duration-500">Create Subscription</a>
      </div>
    </div>

    <!-- Redirect Modal -->
    <div id="countdown-redirect-modal" class="flex flex-col items-center py-5 hidden">
      <div class="mb-4 text-center">
        <h3 class="mt-[25px] mb-[16px] text-[32px] font-normal fontTermina text-gray-900">Redirecting You...</h3>
        <p class="mb-[40px] max-w-[450px] text-[14px] font-normal fontTermina ">
          Members can access Arise through the sign In page.
        </p>
      </div>
      <div id="countdown-clock">
        <p class="mb-[10px] text-[14px]">Redirecting you in
          <span id="countdown-time"></span>
        </p>
        <a href="{{ shop.url }}/account" class="w-full flex items-center px-6 py-[7.5px] md:py-[9.5px] 2xl:py-[8px] text-[12px] xl:text-[14px] leading-[1.4] tracking-[0.08em] font-semibold uppercase bg-[#005850] text-white border border-[#005850] hover:text-[#005850] hover:bg-white rounded-full transition-colors duration-500">Access Arise Now</a>

      </div>
    </div>

  </div>
</div>

<script>

  const modalOverlay = document.getElementById('modal-overlay');
  const closeOverlayBtn = document.getElementById('close-overlay');
  const defaultModal = document.getElementById('default-login-modal');
  const redirectTrigger = document.getElementById('redirect-trigger');
  const redirectModal = document.getElementById('countdown-redirect-modal');
  const countdownClock = document.getElementById('countdown-clock');
  const countdownDisplay = document.getElementById('countdown-time')

  function spawnOverlay() {
    document.body.classList.add('relative');
    document.body.style.overflow = 'hidden';
    modalOverlay.classList.toggle('hidden');
  };

  closeOverlayBtn.addEventListener('click', (event) => {
    document.body.classList.remove('relative');
    document.body.style.overflow = 'auto';
    modalOverlay.classList.toggle('hidden');
  });

  redirectTrigger.addEventListener('click', (event) => {
    defaultModal.classList.add('hidden');
    redirectModal.classList.toggle('hidden');



    console.log('clicked', closeOverlayBtn);

    let countdownTime = 5;

    const countdown = setInterval(function() {
      countdownDisplay.innerHTML = countdownTime;
      countdownTime--;
      console.log(countdownTime);
      if (countdownTime === 1) {
        console.log('redirecting...')
      }
      if (countdownTime === 0) {
        function accountRedirect() {
          window.location.href = 'https://cymbiotika.com/account';
        }
        accountRedirect();
      }

      closeOverlayBtn.addEventListener('click', (event) => {
        console.log(countdownTime);
        function clearCountdown() {
          clearInterval(countdown);
        }
        clearCountdown();

        countdownTime = 5;

        defaultModal.classList.remove('hidden');
        redirectModal.classList.add('hidden');

      });
    }, 1000);
    countdown();

    countdownClock.classList.toggle('hidden');
  });
</script>
